<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMeditor - Static Motion Editor</title>
    <link rel="stylesheet" href="/css/editor.css">
    <link rel="stylesheet" href="/css/automotive.css">
    <script src="https://code.playcanvas.com/playcanvas-1.66.0.min.js"></script>
</head>
<body>
    <div class="editor-container">
        <!-- Header -->
        <header class="editor-header">
            <div class="logo">
                <h1>SMeditor</h1>
                <span>Spatial Content Experience</span>
            </div>
            <div class="actions">
                <button id="preview-btn" class="btn-primary">Preview Scene</button>
                <button id="publish-btn" class="btn-success">Publish & Share</button>
            </div>
        </header>

        <!-- Main Editor -->
        <div class="editor-main">
            <!-- Left Panel: Templates & Data Balls -->
            <div class="left-panel">
                <!-- Template Selection -->
                <div class="panel-section">
                    <h3>World Templates</h3>
                    <div class="world-toggle">
                        <button id="flat-world" class="world-btn active">Flat World</button>
                        <button id="globe-world" class="world-btn">Globe World</button>
                    </div>
                    
                    <!-- Industry Mode Toggle -->
                    <div class="industry-mode">
                        <h4 class="cockpit-title">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"></path>
                            </svg>
                            Industry Mode
                        </h4>
                        <div class="mode-selector">
                            <button id="general-mode" class="mode-btn active">General</button>
                            <button id="automotive-mode" class="mode-btn">üöó Automotive</button>
                            <button id="realestate-mode" class="mode-btn">üè† Real Estate</button>
                        </div>
                    </div>
                    
                    <div class="template-grid">
                        <div class="template-item active" data-template="grid-3x3">
                            <div class="template-preview">
                                <div class="grid-3x3-preview"></div>
                            </div>
                            <span>3x3 Grid</span>
                        </div>
                        <div class="template-item" data-template="grid-2x2">
                            <div class="template-preview">
                                <div class="grid-2x2-preview"></div>
                            </div>
                            <span>2x2 Center</span>
                        </div>
                        <div class="template-item" data-template="linear">
                            <div class="template-preview">
                                <div class="linear-preview"></div>
                            </div>
                            <span>Linear Row</span>
                        </div>
                        <div class="template-item" data-template="circular">
                            <div class="template-preview">
                                <div class="circular-preview"></div>
                            </div>
                            <span>Circular</span>
                        </div>
                    </div>
                </div>

                <!-- Scene Status -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="m9 12 2 2 4-4"></path>
                        </svg>
                        Scene Status
                    </h3>
                    <div class="status-lights">
                        <div class="status-light active" title="Engine Ready"></div>
                        <div class="status-light active" title="Physics Active"></div>
                        <div class="status-light warning" title="Content Validation"></div>
                    </div>
                    <div class="scene-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="container-count">0</span>
                            <span class="stat-label">Containers</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="content-count">0</span>
                            <span class="stat-label">Content</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="scene-size">0KB</span>
                            <span class="stat-label">Size</span>
                        </div>
                    </div>
                </div>

                <!-- Data Balls -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                        </svg>
                        Data Types
                    </h3>
                    <div class="data-balls" id="data-balls-container">
                        <!-- General Mode Data Balls -->
                        <div class="data-ball general-mode-ball" data-type="image" draggable="true">
                            <div class="ball image-ball" style="--ball-color: #ff6b6b; --ball-color-dark: #ee5a24;"></div>
                            <span>Image</span>
                        </div>
                        <div class="data-ball general-mode-ball" data-type="text" draggable="true">
                            <div class="ball text-ball" style="--ball-color: #4ecdc4; --ball-color-dark: #44a08d;"></div>
                            <span>Text</span>
                        </div>
                        <div class="data-ball general-mode-ball" data-type="contact" draggable="true">
                            <div class="ball contact-ball" style="--ball-color: #feca57; --ball-color-dark: #ff9ff3;"></div>
                            <span>Contact</span>
                        </div>
                        <div class="data-ball general-mode-ball" data-type="video" draggable="true">
                            <div class="ball video-ball" style="--ball-color: #5f27cd; --ball-color-dark: #00d2d3;"></div>
                            <span>Video</span>
                        </div>
                        <div class="data-ball general-mode-ball" data-type="3d-model" draggable="true">
                            <div class="ball model-ball" style="--ball-color: #fd79a8; --ball-color-dark: #6c5ce7;"></div>
                            <span>3D Model</span>
                        </div>
                        
                        <!-- Automotive Mode Data Balls (Hidden by default) -->
                        <div class="data-ball automotive-mode-ball" data-type="car-model" draggable="true" style="display: none;">
                            <div class="ball car-model-ball" style="--ball-color: #e74c3c; --ball-color-dark: #c0392b;"></div>
                            <span>üöó Car Model</span>
                        </div>
                        <div class="data-ball automotive-mode-ball" data-type="color-picker" draggable="true" style="display: none;">
                            <div class="ball color-picker-ball" style="--ball-color: #9b59b6; --ball-color-dark: #8e44ad;"></div>
                            <span>üé® Color Picker</span>
                        </div>
                        <div class="data-ball automotive-mode-ball" data-type="car-specs" draggable="true" style="display: none;">
                            <div class="ball car-specs-ball" style="--ball-color: #3498db; --ball-color-dark: #2980b9;"></div>
                            <span>üìä Specifications</span>
                        </div>
                        <div class="data-ball automotive-mode-ball" data-type="hotspot" draggable="true" style="display: none;">
                            <div class="ball hotspot-ball" style="--ball-color: #f39c12; --ball-color-dark: #e67e22;"></div>
                            <span>üìç Hotspots</span>
                        </div>
                        <div class="data-ball automotive-mode-ball" data-type="price-calc" draggable="true" style="display: none;">
                            <div class="ball price-calc-ball" style="--ball-color: #27ae60; --ball-color-dark: #229954;"></div>
                            <span>üí∞ Price Calc</span>
                        </div>
                        <div class="data-ball automotive-mode-ball" data-type="360-view" draggable="true" style="display: none;">
                            <div class="ball view-360-ball" style="--ball-color: #16a085; --ball-color-dark: #138d75;"></div>
                            <span>üîÑ 360¬∞ View</span>
                        </div>
                        
                        <!-- Real Estate Mode Data Balls (Hidden by default) -->
                        <div class="data-ball realestate-mode-ball" data-type="property-info" draggable="true" style="display: none;">
                            <div class="ball property-info-ball" style="--ball-color: #2ecc71; --ball-color-dark: #27ae60;"></div>
                            <span>üè† Property Info</span>
                        </div>
                        <div class="data-ball realestate-mode-ball" data-type="floor-plan" draggable="true" style="display: none;">
                            <div class="ball floor-plan-ball" style="--ball-color: #34495e; --ball-color-dark: #2c3e50;"></div>
                            <span>üìê Floor Plan</span>
                        </div>
                        <div class="data-ball realestate-mode-ball" data-type="neighborhood" draggable="true" style="display: none;">
                            <div class="ball neighborhood-ball" style="--ball-color: #95a5a6; --ball-color-dark: #7f8c8d;"></div>
                            <span>üå≥ Neighborhood</span>
                        </div>
                        <div class="data-ball realestate-mode-ball" data-type="virtual-tour" draggable="true" style="display: none;">
                            <div class="ball virtual-tour-ball" style="--ball-color: #e67e22; --ball-color-dark: #d35400;"></div>
                            <span>üé• Virtual Tour</span>
                        </div>
                    </div>
                </div>

                <!-- Brand Customization -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <palette xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="13.5" cy="6.5" r=".5"/>
                                <circle cx="17.5" cy="10.5" r=".5"/>
                                <circle cx="8.5" cy="7.5" r=".5"/>
                                <circle cx="6.5" cy="12.5" r=".5"/>
                                <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/>
                            </palette>
                        </svg>
                        Brand Identity
                    </h3>
                    <div class="brand-preview">
                        <div class="brand-mini-logo" id="brand-mini-logo">
                            <span class="logo-placeholder">üé®</span>
                        </div>
                        <div class="brand-info">
                            <span class="brand-company" id="brand-company">Your Company</span>
                            <span class="brand-status active">White-label Ready</span>
                        </div>
                    </div>
                    <div class="brand-actions">
                        <button class="btn-branding" onclick="window.open('/branding', '_blank')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            Customize Brand
                        </button>
                        <small class="brand-note">Make spatial experiences your own with custom logos, colors, and domain</small>
                    </div>
                </div>
            </div>

            <!-- Center: Layout Builder -->
            <div class="center-panel">
                <div class="layout-builder">
                    <div class="control-panel">
                        <h3 class="cockpit-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="9" y1="9" x2="15" y2="15"></line>
                                <line x1="15" y1="9" x2="9" y2="15"></line>
                            </svg>
                            Spatial Cockpit
                            <div class="physics-indicator"></div>
                        </h3>
                        <div class="control-group">
                            <span class="control-label">Physics:</span>
                            <select class="control-input" id="physics-mode">
                                <option value="floating">Floating</option>
                                <option value="gravity">Gravity</option>
                                <option value="static">Static</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Spacing:</span>
                            <input type="range" class="control-input" id="container-spacing" min="2" max="8" value="4">
                        </div>
                        <div class="control-group">
                            <span class="control-label">Scale:</span>
                            <input type="range" class="control-input" id="container-scale" min="0.5" max="2" step="0.1" value="1">
                        </div>
                    </div>
                    
                    <div id="container-grid" class="container-grid grid-3x3">
                        <!-- Dynamic containers will be generated here -->
                    </div>
                    
                    <div class="layout-info">
                        <p>üéÆ Physics Engine Active - Drag data balls into spatial containers</p>
                        <p>üéØ Click containers to edit ‚Ä¢ Use controls above to adjust physics</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="scene-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-btn" id="clear-all">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="3,6 5,6 21,6"></polyline>
                                <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2v2"></path>
                            </svg>
                            Clear All
                        </button>
                        <button class="quick-btn" id="auto-fill">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                            </svg>
                            Auto Fill
                        </button>
                        <button class="quick-btn" id="randomize">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M16 3h5v5"></path>
                                <path d="M8 21H3v-5"></path>
                                <path d="M21 8L8 21"></path>
                                <path d="M3 16L16 3"></path>
                            </svg>
                            Randomize
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Content Editor -->
            <div class="right-panel">
                <!-- Container Management -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                            <polyline points="3.27,6.96 12,12.01 20.73,6.96"></polyline>
                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                        </svg>
                        Container Manager
                    </h3>
                    <div class="container-list" id="container-list">
                        <!-- Dynamic container list will be generated here -->
                    </div>
                </div>

                <!-- Content Validation -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M9 12l2 2 4-4"></path>
                            <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path>
                            <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path>
                            <path d="M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"></path>
                            <path d="M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"></path>
                        </svg>
                        Validation
                    </h3>
                    <div id="validation-messages">
                        <!-- Validation messages will appear here -->
                    </div>
                </div>

                <!-- Content Editor -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        Content Editor
                        <span id="selected-container-info" class="cockpit-subtitle"></span>
                    </h3>
                    <div id="editor-content">
                        <div class="validation-message warning">
                            <strong>No Container Selected</strong><br>
                            Click a container in the layout builder to edit its content.
                        </div>
                    </div>
                </div>

                <!-- Scene Analytics -->
                <div class="panel-section">
                    <h3 class="cockpit-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="18" y1="20" x2="18" y2="10"></line>
                            <line x1="12" y1="20" x2="12" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="14"></line>
                        </svg>
                        Scene Analytics
                    </h3>
                    <div class="control-group">
                        <span class="control-label">Completion:</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="completion-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="control-group">
                        <span class="control-label">File Size:</span>
                        <span id="total-file-size">0 KB</span>
                    </div>
                    <div class="control-group">
                        <span class="control-label">Load Time:</span>
                        <span id="estimated-load-time">~0s</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Scene Preview</h2>
            <div id="preview-container">
                <canvas id="preview-canvas"></canvas>
            </div>
            <div class="preview-controls">
                <button id="mobile-preview">Mobile View</button>
                <button id="desktop-preview">Desktop View</button>
            </div>
        </div>
    </div>

    <div id="publish-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Publish Scene</h2>
            <div class="publish-content">
                <div class="qr-section">
                    <div id="qr-code"></div>
                    <p>Scan to view on mobile</p>
                </div>
                <div class="share-section">
                    <label>Share Link:</label>
                    <input type="text" id="share-link" readonly>
                    <button id="copy-link">Copy Link</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Interactive Feedback -->
    <div id="interactive-feedback" class="interactive-feedback">
        <span id="feedback-text"></span>
    </div>

    <script src="/js/editor.js"></script>
    <script src="/js/automotive-features.js"></script>
</body>
</html>